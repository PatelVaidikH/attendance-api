name: Java CI - Attendance Project

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        java-version: "17"
        distribution: "temurin"

    - name: Download JUnit Console Launcher
      run: |
        curl -L -o junit.jar \
        https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.10.1/junit-platform-console-standalone-1.10.1.jar

    - name: Compile Java code
      run: |
        mkdir -p out
        javac -cp junit.jar -d out $(find src -name "*.java")

    - name: Run tests
      run: |
        java -jar junit.jar execute \
        --class-path out \
        --scan-class-path
